# GitHub Sentinel

![GitHub License](https://img.shields.io/github/license/your-username/github-sentinel)
![Python Version](https://img.shields.io/badge/python-3.8%2B-blue)
![GitHub Stars](https://img.shields.io/github/stars/your-username/github-sentinel?style=social)

GitHub Sentinel æ˜¯ä¸€æ¬¾å¼€æºçš„ AI é©±åŠ¨å‹å·¥å…·ï¼Œä¸“ä¸ºå¼€å‘è€…å’Œé¡¹ç›®ç®¡ç†äººå‘˜æ‰“é€ ï¼Œæ—¨åœ¨è‡ªåŠ¨åŒ– GitHub ä»“åº“çš„åŠ¨æ€è·Ÿè¸ªä¸åä½œæµç¨‹ã€‚é€šè¿‡å®šæœŸç›‘æ§å¹¶æ±‡æ€»å…³æ³¨ä»“åº“çš„æ›´æ–°ï¼Œå¸®åŠ©å›¢é˜Ÿå®æ—¶æŒæ¡é¡¹ç›®è¿›å±•ï¼Œå‡å°‘ä¿¡æ¯å»¶è¿Ÿï¼Œæå‡åä½œæ•ˆç‡ã€‚


## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½æ¨¡å—         | æ ¸å¿ƒèƒ½åŠ›                                                                 |
|------------------|--------------------------------------------------------------------------|
| **è®¢é˜…ç®¡ç†**     | çµæ´»æ·»åŠ /ç§»é™¤ä»“åº“è®¢é˜…ï¼Œæ”¯æŒå¤šè®¢é˜…è€…ç®¡ç†ï¼Œè‡ªå®šä¹‰é€šçŸ¥é¢‘ç‡ï¼ˆæ¯æ—¥/æ¯å‘¨ï¼‰     |
| **æ™ºèƒ½æ›´æ–°è·å–** | é«˜æ•ˆæŠ“å– GitHub ä»“åº“åŠ¨æ€ï¼ˆå‘å¸ƒã€æäº¤ã€PRã€Issuesï¼‰ï¼Œè‡ªåŠ¨é¿å…é‡å¤ API è°ƒç”¨ |
| **å¤šæ¸ é“é€šçŸ¥**   | æ”¯æŒé‚®ä»¶ã€Slack ç­‰æ–¹å¼æ¨é€å…³é”®æ›´æ–°ï¼Œç¡®ä¿é‡è¦å˜æ›´ä¸é—æ¼                   |
| **å®šåˆ¶åŒ–æŠ¥å‘Š**   | ç”Ÿæˆ Markdown/HTML æ ¼å¼çš„å•ä»“åº“æŠ¥å‘Šæˆ–å¤šä»“åº“æ±‡æ€»æŠ¥å‘Šï¼Œæ”¯æŒå†å²æŠ¥å‘Šå½’æ¡£   |
| **çµæ´»é…ç½®**     | æ”¯æŒç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶åŒé‡é…ç½®ï¼Œé€‚é…å¼€å‘/ç”Ÿäº§ç­‰ä¸åŒåœºæ™¯                 |


## ğŸ“‹ é€‚ç”¨åœºæ™¯

- **ä¾èµ–è·Ÿè¸ª**ï¼šç›‘æ§ç¬¬ä¸‰æ–¹åº“çš„ç‰ˆæœ¬æ›´æ–°ä¸å®‰å…¨è¡¥ä¸
- **å¼€æºåä½œ**ï¼šè·Ÿè¸ªå¼€æºé¡¹ç›®çš„å¼€å‘åŠ¨æ€ï¼ŒåŠæ—¶å‚ä¸è´¡çŒ®
- **å›¢é˜Ÿç®¡ç†**ï¼šåŒæ­¥å¤šä»“åº“é¡¹ç›®çš„å˜æ›´ï¼Œç¡®ä¿å›¢é˜Ÿä¿¡æ¯ä¸€è‡´
- **ä¸ªäººé¡¹ç›®**ï¼šé›†ä¸­ç®¡ç†ä¸ªäººå…³æ³¨çš„å¤šä¸ªä»“åº“æ›´æ–°ï¼Œæ— éœ€é€ä¸ªæ£€æŸ¥


## âš™ï¸ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

- Python 3.8 åŠä»¥ä¸Šç‰ˆæœ¬
- GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œï¼ˆ[è·å–åœ°å€](https://github.com/settings/tokens)ï¼Œéœ€å‹¾é€‰ `repo` æƒé™ï¼‰


### 2. å®‰è£…éƒ¨ç½²

#### æ–¹å¼ 1ï¼šç›´æ¥å…‹éš†ä»“åº“

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-username/github-sentinel.git
cd github-sentinel

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

#### æ–¹å¼ 2ï¼šä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```


### 3. é…ç½®æ–‡ä»¶

1. å¤åˆ¶é»˜è®¤é…ç½®æ–‡ä»¶æ¨¡æ¿å¹¶ä¿®æ”¹ï¼š
   ```bash
   cp config.yaml.example config.yaml
   ```

2. ç¼–è¾‘ `config.yaml` å…³é”®é…ç½®é¡¹ï¼š
   ```yaml
   # å¿…é¡»é…ç½®ï¼šGitHub ä¸ªäººè®¿é—®ä»¤ç‰Œ
   github_token: "your_github_personal_access_token_here"

   # å¯é€‰ï¼šè°ƒæ•´ä»»åŠ¡è°ƒåº¦æ—¶é—´ï¼ˆæ¯æ—¥/æ¯å‘¨ï¼‰
   scheduler:
     daily_time: "08:30"       # æ¯æ—¥æ£€æŸ¥æ—¶é—´ï¼ˆ24å°æ—¶åˆ¶ï¼‰
     weekly_day: "monday"      # æ¯å‘¨æ£€æŸ¥æ—¥ï¼ˆmonday~sundayï¼‰
     weekly_time: "09:00"      # æ¯å‘¨æ£€æŸ¥æ—¶é—´

   # å¯é€‰ï¼šé…ç½®é€šçŸ¥æ–¹å¼ï¼ˆé‚®ä»¶/Slackï¼‰
   notifications:
     email:
       enabled: true
       smtp_server: "smtp.gmail.com"  # ä½ çš„SMTPæœåŠ¡å™¨
       smtp_username: "your-email@gmail.com"
       smtp_password: "your-app-password"  # é‚®ç®±å¯†ç /åº”ç”¨ä¸“ç”¨å¯†ç 
     slack:
       enabled: false
       webhook_url: "https://hooks.slack.com/services/XXXXXX"  # ä½ çš„Slack Webhook
   ```


### 4. å¯åŠ¨è¿è¡Œ

#### æ–¹å¼ 1ï¼šç›´æ¥å¯åŠ¨ä¸»ç¨‹åº

```bash
python main.py
```

#### æ–¹å¼ 2ï¼šè¿è¡Œç¤ºä¾‹è„šæœ¬ï¼ˆç”Ÿæˆå•ä»“åº“æŠ¥å‘Šï¼‰

```bash
# ç”Ÿæˆ langchain-ai/langchain ä»“åº“çš„æœ€æ–°æŠ¥å‘Š
python examples/generate_langchain_report.py
```


### 5. æŸ¥çœ‹ç»“æœ

- **æŠ¥å‘Šè¾“å‡º**ï¼šé»˜è®¤ä¿å­˜åˆ° `reports/` ç›®å½•ï¼Œæ”¯æŒ Markdown/HTML æ ¼å¼
- **æ—¥å¿—è¾“å‡º**ï¼šæ§åˆ¶å°å®æ—¶æ˜¾ç¤ºæ—¥å¿—ï¼ŒåŒæ—¶ä¿å­˜åˆ° `logs/github-sentinel.log`ï¼ˆå¯é…ç½®ï¼‰
- **è®¢é˜…æ•°æ®**ï¼šè®¢é˜…ä¿¡æ¯é»˜è®¤å­˜å‚¨åˆ° `data/subscriptions.json`ï¼ˆJSON æ ¼å¼ï¼ŒæŒä¹…åŒ–ï¼‰


## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. ç®¡ç†è®¢é˜…

#### æ·»åŠ è®¢é˜…

```python
from subscription.manager import SubscriptionManager
from core.config import Config

# åŠ è½½é…ç½®
config = Config.from_file("config.yaml")
# åˆå§‹åŒ–è®¢é˜…ç®¡ç†å™¨
sub_manager = SubscriptionManager(config)

# æ·»åŠ è®¢é˜…ï¼šä»“åº“å + è®¢é˜…è€…é‚®ç®± + é€šçŸ¥é¢‘ç‡
sub_manager.add_subscription(
    repository="langchain-ai/langchain",
    subscriber="user@example.com",
    daily_updates=True,  # æ¥æ”¶æ¯æ—¥æ›´æ–°
    weekly_report=True   # æ¥æ”¶æ¯å‘¨æŠ¥å‘Š
)
```

#### ç§»é™¤è®¢é˜…

```python
# æ–¹å¼ 1ï¼šé€šè¿‡è®¢é˜…IDç§»é™¤
sub_manager.remove_subscription(subscription_id=1)

# æ–¹å¼ 2ï¼šä»æŒ‡å®šä»“åº“ç§»é™¤å•ä¸ªè®¢é˜…è€…
sub_manager.remove_subscriber(
    repository="langchain-ai/langchain",
    subscriber="user@example.com"
)
```

#### æŸ¥çœ‹è®¢é˜…

```python
# æŸ¥çœ‹æ‰€æœ‰è®¢é˜…
all_subs = sub_manager.get_all_subscriptions()

# æŸ¥çœ‹æŒ‡å®šè®¢é˜…è€…çš„æ‰€æœ‰è®¢é˜…
user_subs = sub_manager.get_subscriptions_for_subscriber("user@example.com")
```


### 2. ç”ŸæˆæŠ¥å‘Š

#### ç”Ÿæˆå•ä»“åº“æŠ¥å‘Š

```python
from report.generator import ReportGenerator
from github.client import GitHubClient
from core.config import Config

config = Config.from_file("config.yaml")
github_client = GitHubClient(config.get("github_token"))
report_generator = ReportGenerator(github_client, config)

# ç”ŸæˆæŠ¥å‘Šï¼ˆæ”¯æŒæŒ‰æ—¶é—´ç­›é€‰ï¼‰
report = report_generator.generate_repo_report(
    repo_full_name="langchain-ai/langchain",
    since=None  # None è¡¨ç¤ºè·å–æ‰€æœ‰æœ€æ–°ä¿¡æ¯ï¼Œå¯ä¼ å…¥ datetime å¯¹è±¡ç­›é€‰æ—¶é—´èŒƒå›´
)

# ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶
report_path = report_generator.save_report(report, "langchain-ai/langchain")
print(f"æŠ¥å‘Šå·²ä¿å­˜ï¼š{report_path}")
```

#### ç”Ÿæˆæ¯å‘¨æ±‡æ€»æŠ¥å‘Š

```python
# è·å–æ‰€æœ‰è®¢é˜…
subscriptions = sub_manager.get_all_subscriptions()

# ç”Ÿæˆæ¯å‘¨æ±‡æ€»æŠ¥å‘Š
weekly_report = report_generator.generate_weekly_report(subscriptions)

# ä¿å­˜æ±‡æ€»æŠ¥å‘Š
report_generator.save_report(weekly_report, "weekly_summary")
```


### 3. é…ç½®å®šæ—¶ä»»åŠ¡

ä¸»ç¨‹åº `main.py` å·²å†…ç½®å®šæ—¶ä»»åŠ¡é€»è¾‘ï¼Œå¯åŠ¨åä¼šæ ¹æ® `config.yaml` ä¸­çš„è°ƒåº¦é…ç½®è‡ªåŠ¨æ‰§è¡Œï¼š
- æ¯æ—¥ä»»åŠ¡ï¼šæŒ‰ `scheduler.daily_time` æ£€æŸ¥æ‰€æœ‰è®¢é˜…ä»“åº“çš„æ›´æ–°ï¼Œæ¨é€é€šçŸ¥å¹¶ç”Ÿæˆæ—¥æŠ¥
- æ¯å‘¨ä»»åŠ¡ï¼šæŒ‰ `scheduler.weekly_day` å’Œ `scheduler.weekly_time` ç”Ÿæˆå‘¨æŠ¥å¹¶æ¨é€


## ğŸ› ï¸ é¡¹ç›®ç»“æ„

```
github-sentinel/
â”œâ”€â”€ core/                 # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ config.py         # é…ç½®ç®¡ç†ï¼ˆæ”¯æŒYAML/ç¯å¢ƒå˜é‡ï¼‰
â”‚   â”œâ”€â”€ logger.py         # æ—¥å¿—ç³»ç»Ÿï¼ˆæ§åˆ¶å°+æ–‡ä»¶è¾“å‡ºï¼Œæ”¯æŒç­‰çº§é…ç½®ï¼‰
â”‚   â””â”€â”€ scheduler.py      # å®šæ—¶ä»»åŠ¡è°ƒåº¦ï¼ˆåŸºäºscheduleåº“ï¼‰
â”œâ”€â”€ github/               # GitHub äº¤äº’æ¨¡å—
â”‚   â”œâ”€â”€ client.py         # GitHub API å®¢æˆ·ç«¯ï¼ˆè·å–ä»“åº“ä¿¡æ¯ã€æ›´æ–°ï¼‰
â”‚   â””â”€â”€ parser.py         # æ•°æ®è§£æï¼ˆæ ¼å¼åŒ–APIè¿”å›ç»“æœï¼‰
â”œâ”€â”€ subscription/         # è®¢é˜…ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ models.py         # æ•°æ®æ¨¡å‹ï¼ˆSubscriptionç±»ï¼‰
â”‚   â”œâ”€â”€ manager.py        # è®¢é˜…ä¸šåŠ¡é€»è¾‘ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰
â”‚   â””â”€â”€ storage.py        # è®¢é˜…å­˜å‚¨ï¼ˆæ”¯æŒå†…å­˜/JSONæ–‡ä»¶ï¼‰
â”œâ”€â”€ notification/         # é€šçŸ¥æ¨¡å—
â”‚   â”œâ”€â”€ base.py           # é€šçŸ¥åŸºç±»ï¼ˆç»Ÿä¸€æ¥å£ï¼‰
â”‚   â”œâ”€â”€ email.py          # é‚®ä»¶é€šçŸ¥ï¼ˆSMTPï¼‰
â”‚   â”œâ”€â”€ slack.py          # Slacké€šçŸ¥ï¼ˆWebhookï¼‰
â”‚   â””â”€â”€ manager.py        # é€šçŸ¥ç®¡ç†å™¨ï¼ˆåè°ƒå¤šæ¸ é“é€šçŸ¥ï¼‰
â”œâ”€â”€ report/               # æŠ¥å‘Šæ¨¡å—
â”‚   â”œâ”€â”€ generator.py      # æŠ¥å‘Šç”Ÿæˆå™¨ï¼ˆå•ä»“åº“/æ±‡æ€»æŠ¥å‘Šï¼‰
â”‚   â””â”€â”€ formatter.py      # æŠ¥å‘Šæ ¼å¼åŒ–ï¼ˆMarkdown/HTMLï¼‰
â”œâ”€â”€ examples/             # ç¤ºä¾‹è„šæœ¬
â”‚   â””â”€â”€ generate_langchain_report.py  # ç”ŸæˆLangChainä»“åº“æŠ¥å‘Šç¤ºä¾‹
â”œâ”€â”€ config.yaml.example   # é…ç½®æ–‡ä»¶æ¨¡æ¿
â”œâ”€â”€ requirements.txt      # ä¾èµ–æ¸…å•
â”œâ”€â”€ main.py               # ä¸»ç¨‹åºå…¥å£
â””â”€â”€ README.md             # é¡¹ç›®æ–‡æ¡£ï¼ˆæœ¬æ–‡æ¡£ï¼‰
```


## ğŸ“¦ ä¾èµ–æ¸…å•

æ ¸å¿ƒä¾èµ–å·²æ•´ç†åœ¨ `requirements.txt` ä¸­ï¼Œä¸»è¦åŒ…æ‹¬ï¼š
- `requests`ï¼šGitHub API è°ƒç”¨
- `PyYAML`ï¼šé…ç½®æ–‡ä»¶è§£æ
- `schedule`ï¼šå®šæ—¶ä»»åŠ¡è°ƒåº¦
- `python-dotenv`ï¼šç¯å¢ƒå˜é‡ç®¡ç†ï¼ˆå¯é€‰ï¼‰
- `smtplib`/`email`ï¼šé‚®ä»¶é€šçŸ¥ï¼ˆPython æ ‡å‡†åº“ï¼‰


## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: å¯åŠ¨æ—¶æŠ¥é”™ `ModuleNotFoundError: No module named 'xxx'`
A1: ç¼ºå°‘ä¾èµ–ï¼Œæ‰§è¡Œ `pip install -r requirements.txt` å®‰è£…æ‰€æœ‰ä¾èµ–ã€‚

### Q2: æ—¥å¿—ç­‰çº§ä¸ç”Ÿæ•ˆ
A2: ç¡®ä¿ `config.yaml` ä¸­ `logging.level` é…ç½®æ­£ç¡®ï¼ˆæ”¯æŒ DEBUG/INFO/WARNING/ERROR/CRITICALï¼‰ï¼Œä¸” `core/logger.py` å·²æ­£ç¡®å¼•å…¥ `logging` æ¨¡å—ã€‚

### Q3: å®šæ—¶ä»»åŠ¡ä¸æ‰§è¡Œ
A3: æ£€æŸ¥ `config.yaml` ä¸­ `scheduler` é…ç½®ï¼š
- `daily_time` æ ¼å¼æ˜¯å¦ä¸º `"HH:MM"`ï¼ˆå¦‚ `"08:30"`ï¼‰
- `weekly_day` æ˜¯å¦ä¸ºå°å†™è‹±æ–‡ï¼ˆå¦‚ `"monday"`ï¼‰
- ç¡®ä¿ç¨‹åºæŒç»­è¿è¡Œï¼ˆåå°è¿è¡Œå¯ä½¿ç”¨ `nohup python main.py &`ï¼ŒWindows å¯ä½¿ç”¨ä»»åŠ¡è®¡åˆ’ç¨‹åºï¼‰

### Q4: GitHub API è°ƒç”¨å¤±è´¥
A4: 
1. æ£€æŸ¥ `github_token` æ˜¯å¦æœ‰æ•ˆä¸”æƒé™è¶³å¤Ÿï¼ˆéœ€ `repo` æƒé™ï¼‰
2. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ `logs/github-sentinel.log` ä¸­çš„å…·ä½“é”™è¯¯ä¿¡æ¯
3. è‹¥æç¤º API é€Ÿç‡é™åˆ¶ï¼Œå¯æ›´æ¢ä»¤ç‰Œæˆ–ç­‰å¾…é™åˆ¶é‡ç½®ï¼ˆGitHub åŒ¿å API é€Ÿç‡è¾ƒä½ï¼Œå»ºè®®ä½¿ç”¨ä»¤ç‰Œï¼‰


## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼å‚ä¸é¡¹ç›®è´¡çŒ®ï¼š

1. **æäº¤ Issue**ï¼šæŠ¥å‘Š bugã€æå‡ºæ–°åŠŸèƒ½å»ºè®®ï¼ˆ[Issue åœ°å€](https://github.com/your-username/github-sentinel/issues)ï¼‰
2. **æäº¤ PR**ï¼š
   -  Fork æœ¬ä»“åº“
   -  åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼ˆ`git checkout -b feature/xxx`ï¼‰
   -  æäº¤ä»£ç ï¼ˆ`git commit -m "feat: æ·»åŠ xxxåŠŸèƒ½"`ï¼‰
   -  æ¨é€åˆ†æ”¯ï¼ˆ`git push origin feature/xxx`ï¼‰
   -  å‘èµ· Pull Request
3. **æ–‡æ¡£æ”¹è¿›**ï¼šä¼˜åŒ– README æˆ–æ·»åŠ ä½¿ç”¨ç¤ºä¾‹


## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯**ï¼Œè¯¦æƒ…è§ [LICENSE](https://github.com/your-username/github-sentinel/blob/main/LICENSE) æ–‡ä»¶ã€‚


## ğŸ“ è”ç³»æˆ‘ä»¬

è‹¥æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- GitHub Issuesï¼š[https://github.com/your-username/github-sentinel/issues](https://github.com/your-username/github-sentinel/issues)
- é‚®ç®±ï¼šyour-email@example.com
